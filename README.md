# Разложение числа на эллиптической кривой

## Настройка среды разработки
Данная программа была реализована на SageMath на языке программирования Python 3 в среде разработки Jupyter Notebook.
Все зависимости присутствуют в SageMath. Установить пакет SageMath можно по ссылке с официального сайта: https://www.sagemath.org.

## Немного об алгоритмах разложения чисел
Задача разложения на множители числа n над кольцом Z сводится к нахождению всех простых делителей числа n. Методы разложения числа на множители можно разделить на специальные и универсальные. 
Специальные методы эффективны для некоторых классов составных чисел и, как правило, используют генератор случайных чисел или псевдослучайное отображение. К таким методам относятся ρ-метод Полларда, (p-1)-метод Полларда.
Универсальные методы не предполагают никакой информации о виде числа n и его делителях. К таким методам относятся метод пробного деления, метод «giant step – baby step», метод Ферма, метод диофантовой аппроксимации, метод непрерывных дробей, метод квадратичного решета и др.
В 1987 г. Х. Ленстра предложил алгоритм разложения числа на множители с использованием эллиптических кривых.

## Немного об алгоритме Ленстры

Метод Ленстры является аналогом (p-1)-метода Полларда в группе точек эллиптической кривой, который позволяет найти нетривиальный делитель заданного числа n.
Предположим, что число n раскладывается на множители: n=pq, где p≠q – простые числа. Тогда по китайской теореме об остатках имеет место изоморфизм групп: 
E(Z⁄nZ) ≅ E(Z⁄pZ) ⊕ E(Z⁄qZ).
Умножение любого элемента группы E(Z⁄nZ) на m∈Z сохраняет данный изоморфизм:
mE(Z⁄nZ) ≅ mE(Z⁄pZ) ⊕ mE(Z⁄qZ).
В формуле сложения двух точек P_1 = (x_1,y_1) и P_2 = (x_2,y_2) выражение для углового коэффициента имеет вид: λ = (3x_1^2+A)/(2y_1), а в формуле удвоения (P_1 = P_2) коэффициент соответственно равен λ = (y_2-y_1)/(x_2-x_1 ). В некоторых случаях может получиться так, что по модулю p точки различны, а по модулю q одинаковы. Тогда формулы сложения точек дадут неправильный результат, и сумма точек может не лежать на исходной кривой.
Данная ситуация легко обнаруживается вычислением значения d = НОД(n, λ_1), где λ_1 – знаменатель в формулах углового коэффициента λ. Если точки заданы в проективных координатах (X, Y, Z), то при вычислении d можно использовать значение координаты Z: d = НОД(n,Z). При d, отличном от 1 и n, задача нахождения делителя числа n решена.

